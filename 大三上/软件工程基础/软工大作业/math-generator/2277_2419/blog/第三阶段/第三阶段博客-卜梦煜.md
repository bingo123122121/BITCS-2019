# 四则运算训练系统博客

## 目录

1. 接口设计
   1. 需求分析
   2. 类的组织
   3. Information Hiding
   4. Interface Design
   5. Loose Coupling
2. 设计实现
   1. Model
   2. Controller
   3. View
3. 单元测试
4. 性能测试
5. 心得感悟



## 1. 接口设计

### 1.1 需求分析

根据用户第三阶段需求，项目需要用Windows图形界面实现，同时增加 “倒计时” 功能， 每个题目必须在 20 秒钟完成，如果完不成，则得0 分并进入下一题。增加“历史纪录” 功能， 把用户做题的成绩记录下来并可以展现历史记录。 增添乘方运算，并让用户自由选择乘方表示方式。

Model部分需要增添历史记录文件的读写存取操作。

Controller部分增添历史记录管理的功能，负责写入、读取、清除历史记录等。

View部分增添GUI界面，将前两阶段所有功能用控件形式实现，并增添倒计时和历史记录功能。

### 1.2 类的组织

Controller部分增添一个类：

* ManageRecord类：负责历史记录管理，包括写入、读取、清除历史记录等。

View部分增添一个类：

* Mainwindow类：GUI图形界面。

### 1.3 Information Hiding

信息隐藏主要通过类及类方法的封装实现，第三阶段在第二阶段基础上增添：

1. 将历史记录管理单独封装成一个类，实现历史记录功能。
2. 将历史记录文件的直接读写操作封装在文件类中。
3. 用户界面单独封装成为一个类。

### 1.4 Interface Design

MVC三个部分之间需要通过接口交换信息，第三阶段在第二阶段基础上增添：

* model部分和controller部分：历史记录操作命令和历史记录内容。
* controller部分和view部分：生成的题目、用户答案及判断结果、历史记录内容。

我们对这些需要交换的信息设置相应的接口并尽量保证接口在非必要时只读。

### 1.5 Loose Coupling

通过信息隐藏和接口设计，我们使得model部分，controller部分，view部分之间交换的信息达到最简，从而降低了项目的耦合度。

## 2. 设计实现

第三阶段相比第二阶段，新增用户界面、倒计时功能、历史记录功能。我负责完成历史记录功能，主要修改Model模块的File类，封装历史记录的读写操作；增加Controller模块的ManageRecord类，完成历史记录的写入、读出、查询、删除操作。

### 2.1 Model

在第二阶段的基础上修改File类，增加历史记录的写入、读出、查询、设置文件路径操作，对第二阶段File类的的部分方法做修改，以使得方法可以复用，保证代码的可拓展性。

### 2.2 Controller

在第二阶段的基础上增加ManageRecord类，调用Model模块的File类，向View模块提供历史记录写入、读取、查询、删除操作的接口。

### 2.3 View

队友实现

## 3. 单元测试

单元测试主要是对类中方法特别是接口进行测试，并采用vs2019自带的代码覆盖率工具查看代码覆盖率。

## 4. 性能测试

软件测试包括性能测试、软件质量测试，这些都采用vs2019自带的代码测试工具实现，测试结果见测试文档。

## 5. 心得感悟

第三阶段相比第二阶段，增加了图形化界面、倒计时功能、历史记录功能。对我负责的历史记录功能，由于我们在第一阶段就采用了MVC架构编写代码，因此模块间独立性较好，拓展历史记录功能时仅需修改和添加很少的内容即可完成。这也证明了，严格按照软件开发的流程和方法设计软件是十分必要的，可以让软件具有较好的可拓展性。
