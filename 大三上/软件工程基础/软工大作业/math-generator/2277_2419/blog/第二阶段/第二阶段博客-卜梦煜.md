# 四则运算训练系统博客

## 目录

1. 接口设计
   1. 需求分析
   2. 类的组织
   3. Information Hiding
   4. Interface Design
   5. Loose Coupling
2. 设计实现
   1. Model
   2. Controller
   3. View
3. 单元测试
4. 性能测试
5. 心得感悟



## 1. 接口设计

### 1.1 需求分析

根据用户第二阶段需求，项目需要增添乘方运算，并让用户自由选择乘方表示方式。

Model部分需要增添乘方运算方法；在公式生成时，需要根据用户的选择输出相应的表示方式。

Controller部分增添向Model传递用户选择乘方表示方式的情况的功能。

View部分增添引导用户选择乘方表示方式的功能，并将用户选择结果传递给Controller部分。

### 1.2 类的组织

MVC三部分的类的组织不改变，只是增加实现相应功能所需的方法。

### 1.3 Information Hiding

信息隐藏主要通过类及类方法的封装实现，第二阶段在第一阶段基础上增添：

1. 将乘方运算单独封装在运算类中，运算时只需调用相应函数即可。
2. 将判断并采用用户选的乘方形式封装在表达式类中，这样外界只需要传入用户的选择情况，即可在生成表达式时自动得到对应表示方式的表达式。

### 1.4 Interface Design

MVC三个部分之间需要通过接口交换信息，第二阶段在第一阶段基础上增添：

* model部分和controller部分：用户选择乘方表示方式的情况
* controller部分和view部分：用户选择乘方表示方式的情况

我们对这些需要交换的信息设置相应的接口并尽量保证接口在非必要时只读。

### 1.5 Loose Coupling

通过信息隐藏和接口设计，我们使得model部分，controller部分，view部分之间交换的信息达到最简，从而降低了项目的耦合度。

## 2. 设计实现

得益于MVC架构模块间优秀的独立性与接口设计，我们第二阶段只需修改很少的代码。我负责修改Controller模块ProblemGenerate类、View模块的Cmd类，主要修改内容为增加乘方选项。

### 2.1 Model

队友实现

### 2.2 Controller

修改ProblemGenerate类，增加含参构造函数，从而将用户选择乘方表示方式传递给Formula对象，Formula对象生成对应乘方表示形式的表达式。

### 2.3 View

修改Cmd类，增加含参构造函数，从而将用户选择乘方表示方式传递给ProblemGenerate对象。

## 3. 单元测试

单元测试主要是对类中方法特别是接口进行测试，并采用vs2019自带的代码覆盖率工具查看代码覆盖率。

## 4. 性能测试

软件测试包括性能测试、软件质量测试，这些都采用vs2019自带的代码测试工具实现，测试结果见测试文档。

## 5. 心得感悟

第二阶段相比第一阶段改动较少，工作量也相应较少，体现了增量模型的优势。由于我们选择MVC模型与面向对象的代码组织方式，因此模块间独立性较好，软件具有易修改性与易拓展性，编写增量代码时工作量较少。同时，我们注意接口设计中信息隐藏，以尽可能减少模块之间的耦合度。
