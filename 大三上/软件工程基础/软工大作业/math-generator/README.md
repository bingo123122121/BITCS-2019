# 结对项目: 四则运算训练

## 一、作业要求

1. 阅读个人软件开发流程（PSP）的相关资料。
2. 可选的语言包括:C++，C#，Java，Python。运行环境为64bit Windows 10。
3. 提交的代码要求经过代码质量分析工具的分析并消除所有的警告。如[Code Quality Analysis](http://msdn.microsoft.com/en-us/library/dd264897.aspx)。
4. 完成项目的首个版本之后，请使用**性能分析工具**来找出代码中的性能瓶颈并进行改进。
5. 使用单元测试对项目进行测试，并查看测试分支覆盖率等指标；并写出至少10个测试用例确保你的程序能够正确处理各种情况。如[Studio Profiling Tools](https://msdn.microsoft.com/en-us/library/mt210448.aspx)。
6. 使用Git来管理源代码和测试用例，**代码有进展即签入本地仓库，定期推送到服务器上，并发送合并请求提交每周的工作成果。签入记录不合理的项目会被抽查询问项目细节。**
7. 按照要求发布博客，结合结对项目的实践经历，撰写解决项目的心路历程与收获。**博客与项目明显不符的作业将取消作业成绩。**

> 注意：要求3、4、5根据所选编程语言使用对应的开发工具来完成。

## 二、需求

**分成三个阶段，每周更新**

### 第1阶段
 
写一个能自动生成四则运算题目的命令行 “软件”， 分别满足下面的各种需求。

下面这些需求都可以用命令行参数的形式来指定：

a) 一次可以出一千道道题目，并且没有重复的，把题目写入一个文件中。

**任何两道题目不能通过有限次交换+和×左右的算术表达式变换为同一道题目**。例如，23 + 45 = 和45 + 23 = 是重复的题目，6 × 8 = 和8 × 6 = 也是重复的题目。**3+(2+1)和1+2+3这两个题目是重复的，由于+是左结合的，1+2+3等价于(1+2)+3，也就是3+(1+2)，也就是3+(2+1)。但是1+2+3和3+2+1是不重复的两道题，因为1+2+3等价于(1+2)+3，而3+2+1等价于(3+2)+1，它们之间不能通过有限次交换变成同一个题目。**

b) 当有多于一个运算符的时候，如何对一个表达式求值？逐步扩展功能和可以支持的表达式类型，最后希望能支持下面类型的题目 （最多 10 个运算符，括号的数量不限制）：

```
     25 - 3 * 4 - 2 / 2 + 89 = ？
     1/2 + 1/3 - 1/4 = ？ 
    （5 - 4 ） * （3 +28） =？
```

c) 除了整数以外，还要支持真分数的四则运算。 （例如：  1/6 + 1/8 = 7/24  )

d) 让程序能接受用户输入答案，并判定对错。 最后给出总共 对/错 的数量。

### 第2阶段

增加一个运算符，要支持乘方(power)运算。乘方运算的优先级高于乘除法。如何表示乘方，有两种表示方法：

```
4 ^ 2 = 16,   4 的二次方等于 16。  这里， ^ 表示乘方
4 ** 2 = 16,   4 的二次方等于16。  这里， **  表示乘方 （** 之间不能有空格，否则是错误的算式）
```

两种表示方法都要支持，可以通过设置来选择。

### 第3阶段

结对的同学商量一下，从以下几个方向中选择一个，对程序进行扩展。

- 把程序变成一个 Windows/Mac/Linux 电脑图形界面的程序 (取决于你目前使用的电脑)，同时增加 “倒计时” 功能， 每个题目必须在 20 秒钟完成，如果完不成，则得0 分并进入下一题。增加“历史纪录” 功能， 把用户做题的成绩记录下来并可以展现历史记录。 
- 把程序变成一个智能手机程序 （你正在用什么手机， 就写那个手机的程序）， 增加倒计时，和历史纪录功能（见上）。
- 把程序变成一个网页程序， 用户通过设定参数，就可以得到各种题目。
- 选一个你从来没有学过的编程语言，试一试实现基本功能。
  估计做好这个软件需要的时间，并且写出大概的设计步骤和实现算法。
- 把这个程序的思路变成一个可以一步一步演示的动画。写一个带有图形界面的程序：

```
  输入：一个正常的四则运算句子
  输出：程序用动画表示计算的过程，后序转换的过程，处理不同运算符优先级的过程， 根据调度场工作的原理，逐步算出得出结果的过程。
```

## 三、博客撰写要求

使用Markdown编写小组博客，可在小组目录中建立一个名为blog的子目录，建议每周一个文件，描述一周的工作进展。

- 在开始实现程序之前，在**PSP表格**记录下你估计的时间。
- 看教科书和其它资料中关于Information Hiding, Interface Design, Loose Coupling的章节，说明你们在结对编程中是如何利用这些方法对接口进行设计的。
- 描述重要**模块接口的设计与实现过程**。设计包括代码如何组织，比如会有几个类，几个函数，他们之间关系如何，关键函数是否需要画出流程图？说明你的算法的关键（不必列出源代码），以及独到之处。
- 阅读有关UML的内容：[UML](https://en.wikipedia.org/wiki/Unified_Modeling_Language)。 画出UML图显示计算模块部分各个实体之间的关系(画一个图即可)。
- 看Design by Contract, Code Contract的内容：
  [Design by contract](http://en.wikipedia.org/wiki/Design_by_contract)
  [Code contract](http://msdn.microsoft.com/en-us/devlabs/dd491992.aspx)
  描述这些做法的优缺点, 说明你是如何把它们融入结对作业中的。
- 程序的代码规范，设计规范。 你们两如何达成共识，采用了什么规范？ 程序中是否有异常处理？你是如何处理各种异常的？
- **界面模块的详细设计过程**。你的程序有用户界面么？在博客中详细介绍界面模块是如何设计的。
- **界面模块与其它模块的对接**。详细地描述UI模块的设计与其他模块的对接，并在博客中截图实现的功能。界面/控制/数据模块体现了 [MVC 的设计模式](https://en.wikipedia.org/wiki/Model–view–controller)了么？
- **描述结对的过程**，提供非摆拍的两人在讨论的结对照片。可以做遮挡或美化。
- 看教科书和其它参考书，网站中关于[结对编程的章节](http://www.cnblogs.com/xinz/archive/2011/08/07/2130332.html)，说明你们采用了哪种合作方式，以及结对编程的优点和缺点。
  - 结对的每一个人的优点和缺点在哪里 (要列出至少三个优点和一个缺点)。
  - 你如何说服你的伙伴改进TA的缺点？请考虑一下三明治方法。 
- 在你实现完程序之后，在附录提供的**PSP表格**记录下你在开发各个步骤上实际花费的时间。并说明差异的原因。 
- 其它收获，例如，如何攻克技术难点，你做了哪些阅读，探索，可以把资料和经历描述一下。 如果你的项目是和其他同学一起比赛（例如比赛速度），描述一下你的程序和其他程序的优劣。 

## 四、评分规则

结对项目分数由三部分组成，分别是
* 博客 — 25分。
* 程序 — 25分

```
5分为源代码管理评分，该评分主要通过源代码管理中的commit注释信息，增量修改的内容，是否有运行说明等给分。
15分为正确性评分。
5分为性能评分。
当程序的正确性评分等于15分时才可以参与性能评分环节，所以请各位同学务必保证自己程序的正确性。
```

* 注意事项：

```
按时间完成并提交——正常评分
晚交一周以内——折扣90%
晚交一周以上——折扣70%
不交或抄袭——0分【严禁代码与博客等一切形式的抄袭！请各位同学千万不要触碰底线，勿谓言之不预也！】
```

*附：PSP 2.1表格*

| PSP2.1 | Personal Software Process Stages | 预估耗时（分钟） | 实际耗时（分钟） |
| --- | --- | --- | --- |
| Planning | 计划 |  |  |
| · Estimate | · 估计这个任务需要多少时间 |  |  |
| Development | 开发 |  |  |
| · Analysis | · 需求分析 (包括学习新技术) |  |  |
| · Design Spec | · 生成设计文档 |  |  |
| · Design Review | · 设计复审 (和同事审核设计文档) |  |  |
| · Coding Standard | · 代码规范 (为目前的开发制定合适的规范) |  |  |
| · Design | · 具体设计 |  |  |
| · Coding | · 具体编码 |  |  |
| · Code Review | · 代码复审 |  |  |
| · Test | · 测试（自我测试，修改代码，提交修改） |  |  |
| Reporting | 报告 |  |  |
| · Test Report | · 测试报告 |  |  |
| · Size Measurement | · 计算工作量 |  |  |
| · Postmortem & Process Improvement Plan | · 事后总结, 并提出过程改进计划 |  |  |
|  | 合计 |  |  |

